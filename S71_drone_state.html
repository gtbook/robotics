

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>7.1. Moving in Three Dimensions &#8212; Introduction to Robotics and Perception</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/style.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-312077-7"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-312077-7');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'S71_drone_state';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7.2. Multi-rotor Aircraft" href="S72_drone_actions.html" />
    <link rel="prev" title="7. Autonomous Drones in 3D" href="S70_drone_intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Introduction to Robotics and Perception - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Introduction to Robotics and Perception - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction to Robotics and Perception
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="S10_introduction.html">1. Introduction</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="S11_intro_state.html">1.1. Representing State</a></li>
<li class="toctree-l2"><a class="reference internal" href="S12_intro_actions.html">1.2. Robot Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="S13_intro_sensing.html">1.3. Sensing</a></li>
<li class="toctree-l2"><a class="reference internal" href="S14_intro_perception.html">1.4. Perception</a></li>
<li class="toctree-l2"><a class="reference internal" href="S15_intro_decision.html">1.5. Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="S16_intro_learning.html">1.6. Learning</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="S20_sorter_intro.html">2. A Trash Sorting Robot</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="S21_sorter_state.html">2.1. Modeling the World State</a></li>
<li class="toctree-l2"><a class="reference internal" href="S22_sorter_actions.html">2.2. Actions for Sorting Trash</a></li>
<li class="toctree-l2"><a class="reference internal" href="S23_sorter_sensing.html">2.3. Sensors for Sorting Trash</a></li>
<li class="toctree-l2"><a class="reference internal" href="S24_sorter_perception.html">2.4. Perception</a></li>
<li class="toctree-l2"><a class="reference internal" href="S25_sorter_decision_theory.html">2.5. Decision Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="S26_sorter_learning.html">2.6. Learning</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="S30_vacuum_intro.html">3. A Robot Vacuum Cleaner</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="S31_vacuum_state.html">3.1. Modeling the State of the Vacuum Cleaning Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="S32_vacuum_actions.html">3.2. Actions over time</a></li>
<li class="toctree-l2"><a class="reference internal" href="S33_vacuum_sensing.html">3.3. Dynamic Bayes Nets</a></li>
<li class="toctree-l2"><a class="reference internal" href="S34_vacuum_perception.html">3.4. Perception with Graphical Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="S35_vacuum_decision.html">3.5. Markov Decision Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="S36_vacuum_RL.html">3.6. Reinforcement Learning</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="S40_logistics_intro.html">4. Warehouse Robots in 2D</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="S41_logistics_state.html">4.1. Continuous State</a></li>
<li class="toctree-l2"><a class="reference internal" href="S42_logistics_actions.html">4.2. Moving in 2D</a></li>
<li class="toctree-l2"><a class="reference internal" href="S43_logistics_sensing.html">4.3. Sensor Models with Continuous State</a></li>
<li class="toctree-l2"><a class="reference internal" href="S44_logistics_perception.html">4.4. Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="S45_logistics_planning.html">4.5. Planning for Logistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="S46_logistics_learning.html">4.6. Some System Identification</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="S50_diffdrive_intro.html">5. A Mobile Robot With Simple Kinematics</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="S51_diffdrive_state.html">5.1. State Space for a Differential Drive Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="S52_diffdrive_actions.html">5.2. Motion Model for the Differential Drive Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="S53_diffdrive_sensing.html">5.3. Robot Vision</a></li>
<li class="toctree-l2"><a class="reference internal" href="S54_diffdrive_perception.html">5.4. Computer Vision 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="S55_diffdrive_planning.html">5.5. Path Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="S56_diffdrive_learning.html">5.6. Deep Learning</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="S60_driving_intro.html">6. Autonomous Vehicles</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="S61_driving_state.html">6.1. Planar Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="S62_driving_actions.html">6.2. Kinematics for Driving</a></li>
<li class="toctree-l2"><a class="reference internal" href="S63_driving_sensing.html">6.3. Sensing for Autonomous Vehicles</a></li>
<li class="toctree-l2"><a class="reference internal" href="S64_driving_perception.html">6.4. SLAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="S65_driving_planning.html">6.5. Planning for Autonomous Driving.</a></li>
<li class="toctree-l2"><a class="reference internal" href="S66_driving_DRL.html">6.6. Deep Reinforcement Learning</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="S70_drone_intro.html">7. Autonomous Drones in 3D</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">7.1. Moving in Three Dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="S72_drone_actions.html">7.2. Multi-rotor Aircraft</a></li>
<li class="toctree-l2"><a class="reference internal" href="S73_drone_sensing.html">7.3. Sensing for Drones</a></li>
<li class="toctree-l2"><a class="reference internal" href="S74_drone_perception.html">7.4. Visual SLAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="S75_drone_planning.html">7.5. Trajectory Optimization</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/gtbook/robotics" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/gtbook/robotics/issues/new?title=Issue%20on%20page%20%2FS71_drone_state.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/S71_drone_state.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Moving in Three Dimensions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rotations-in-3d-aka-so-3">7.1.1. Rotations in 3D aka SO(3)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#d-rigid-transforms-aka-se-3">7.1.2. 3D Rigid transforms aka SE(3)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-group-se-3">7.1.3. The Group <span class="math notranslate nohighlight">\(SE(3)\)</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#se-3-in-gtsam">7.1.4. <span class="math notranslate nohighlight">\(SE(3)\)</span> in GTSAM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity">7.1.5. Velocity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">7.1.6. Summary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><a href="https://colab.research.google.com/github/gtbook/robotics/blob/main/S71_drone_state.ipynb" target="_parent"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="moving-in-three-dimensions">
<h1><span class="section-number">7.1. </span>Moving in Three Dimensions<a class="headerlink" href="#moving-in-three-dimensions" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p>Motion in 3D has 6 degrees of freedom.</p>
</div></blockquote>
<a class="reference internal image-reference" href="_images/S71-Autonomous_camera_drone-03.jpg"><img alt="Splash image with steampunk drones in various orientations" class="align-center" src="_images/S71-Autonomous_camera_drone-03.jpg" style="width: 40%;" /></a>
<p>In Section 6.1 we introduced the space of 2D rigid transformations <span class="math notranslate nohighlight">\(SE(2)\)</span>, and showed how <span class="math notranslate nohighlight">\(3 \times 3\)</span> matrices can be used to simultaneously represent
rotation and translation in two dimensions.
At that time, we promised that this could be easily generalized to the case of rotation and
translation in three dimensions.  In this section, we deliver on that promise, and introduce two new spaces:
the 3D rotations <span class="math notranslate nohighlight">\(SO(3)\)</span> and 3D rigid transformations <span class="math notranslate nohighlight">\(SE(3)\)</span>.</p>
<p>In addition to representing the <em>pose</em> of a drone in 3D we are also interested in
representing velocity.
We will discuss both linear and angular velocity, i.e., the rate of change in the orientation of one coordinate frame with respect to another.</p>
<p>The discussion below holds for generic coordinate frames, but because this is the drone chapter, we introduce two frames here that make things a bit more tangible:</p>
<ul class="simple">
<li><p>the <strong>navigation frame</strong> <span class="math notranslate nohighlight">\(N\)</span>, which you can think of as attached to the Earth;</p></li>
<li><p>the <strong>body frame</strong> <span class="math notranslate nohighlight">\(B\)</span>, which you can think of as rigidly attached to the drone.</p></li>
</ul>
<p>In the next section different conventions for these coordinate frames are discussed in more detail, but below we simply use the subscripts “n” and “b” in the definitions and examples, irrespective of which convention is used.</p>
<section id="rotations-in-3d-aka-so-3">
<h2><span class="section-number">7.1.1. </span>Rotations in 3D aka SO(3)<a class="headerlink" href="#rotations-in-3d-aka-so-3" title="Permalink to this heading">#</a></h2>
<p>In Section 6.1, we constructed a rotation matrix <span class="math notranslate nohighlight">\(R^0_1 \in SO(2)\)</span>
by projecting the axes of Frame 1 onto Frame 0.
The extension to 3D is straightforward.
Using the navigation and body coordinate frames defined above, let us project the axes <span class="math notranslate nohighlight">\((x_b, y_b, z_b)\)</span> of the body frame <span class="math notranslate nohighlight">\(B\)</span> onto the axes <span class="math notranslate nohighlight">\((x_n,y_n, z_n)\)</span> of the navigation frame <span class="math notranslate nohighlight">\(N\)</span>.
Of course, in the 3D case each frame is equipped with an additional <span class="math notranslate nohighlight">\(z\)</span>-axis:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
R_{b}^{n}
=\begin{bmatrix}
x_b \cdot x_n &amp; y_b \cdot x_n &amp; z_b \cdot x_n \\
x_b \cdot y_n &amp; y_b \cdot y_n &amp; z_b \cdot y_n \\
x_b \cdot z_n &amp; y_b \cdot z_n &amp; z_b \cdot z_n \\
\end{bmatrix}
\end{split}\]</div>
<p>The expression for <em>rotational</em> coordinate transformations is now exactly the
same as in Chapter 6.
Given a point <span class="math notranslate nohighlight">\(p\)</span> with coordinates expressed relative to the body
frame <span class="math notranslate nohighlight">\(B\)</span>, we compute its coordinates <span class="math notranslate nohighlight">\(p^n\)</span> in the navigation frame <span class="math notranslate nohighlight">\(N\)</span> as follows:</p>
<div class="math notranslate nohighlight">
\[
p^n = R^n_b p^b
\]</div>
<p>Extending the semantics from 2D rotations in <span class="math notranslate nohighlight">\(SO(2)\)</span> to 3D rotations represented by <span class="math notranslate nohighlight">\(SO(3)\)</span>,
the columns
of <span class="math notranslate nohighlight">\(R_{b}^{n}\)</span> represent the axes of frame <span class="math notranslate nohighlight">\(B\)</span> in the <span class="math notranslate nohighlight">\(N\)</span> coordinate
frame:</p>
<div class="math notranslate nohighlight">
\[
R_{b}^{n}=\left[\begin{array}{ccc}
\hat{x}_{b}^{n} &amp; \hat{y}_{b}^{n} &amp; \hat{z}_{b}^{n}\end{array}\right]
\]</div>
<p>The 3D rotations together with composition constitute the <strong>special
orthogonal group</strong> <span class="math notranslate nohighlight">\(SO(3)\)</span>, hence the abbreviation “SO”. It is made up of all <span class="math notranslate nohighlight">\(3\times3\)</span> orthonormal
matrices with determinant <span class="math notranslate nohighlight">\(+1\)</span>. This group has matrix multiplication as its
composition operation,
but unlike in two dimensions, <em>3D rotations do not commute</em>, i.e., in general <span class="math notranslate nohighlight">\(R_{2}R_{1}\neq R_{1}R_{2}\)</span>.
The group so obtained it is called “special” because of the +1 determinant. Orthonormal matrices either have a -1 or +1 determinant, but those with -1 are <em>reflections</em>, which we specifically exclude here.</p>
<p>It is often useful to refer to rotations about one of the coordinate axes.
These basic rotation matrices are given by</p>
<div class="math notranslate nohighlight">
\[\begin{split}
R_{x,\phi}
=\begin{bmatrix}
1 &amp; 0 &amp; 0 \\
0 &amp; \cos \phi &amp; - \sin \phi \\
0 &amp; \sin \phi &amp; \cos \phi 
\end{bmatrix}
~~~
R_{y,\theta}
=\begin{bmatrix}
\cos \theta &amp;      0   &amp; \sin \theta \\
0            &amp;     1   &amp;  0 \\
-\sin \theta &amp; 0       &amp; \cos \theta
\end{bmatrix}
~~~
R_{z,\psi}
=\begin{bmatrix}
\cos \psi &amp;-\sin \psi &amp; 0 \\
\sin \psi &amp;\cos \psi &amp; 0 \\
0 &amp; 0   &amp;  1
\end{bmatrix}
\end{split}\]</div>
<p>Note, in particular, the form of <span class="math notranslate nohighlight">\(R_{z,\psi}\)</span>, the rotation about the <span class="math notranslate nohighlight">\(z\)</span>-axis.
The upper-left <span class="math notranslate nohighlight">\(2\times 2\)</span> block of this matrix is exactly a rotation matrix <span class="math notranslate nohighlight">\(R \in SO(2)\)</span>
as introduced in Section 6.1.
This can be understood by realizing that rotation in the <span class="math notranslate nohighlight">\(xy\)</span> plane is actually
a rotation about an implicit <span class="math notranslate nohighlight">\(z\)</span>- axis that points “out of the page.”</p>
</section>
<section id="d-rigid-transforms-aka-se-3">
<h2><span class="section-number">7.1.2. </span>3D Rigid transforms aka SE(3)<a class="headerlink" href="#d-rigid-transforms-aka-se-3" title="Permalink to this heading">#</a></h2>
<p>In a similar way we can extend the group of 2D rigid transforms <span class="math notranslate nohighlight">\(SE(2)\)</span> to the case
of <em>rotation and translation</em> in three dimensions.
Suppose a point <span class="math notranslate nohighlight">\(p\)</span> is rigidly attached to frame <span class="math notranslate nohighlight">\(B\)</span>, and
we wish to determine its coordinates with respect to the navigation frame <span class="math notranslate nohighlight">\(N\)</span>.
If the coordinates of <span class="math notranslate nohighlight">\(p\)</span> with respect to frame <span class="math notranslate nohighlight">\(B\)</span> are given by <span class="math notranslate nohighlight">\(p^b\)</span>,
then we can express it in frame <span class="math notranslate nohighlight">\(N\)</span> as follows:</p>
<div class="math notranslate nohighlight">
\[
p^{n}=R_{b}^{n}p^{b}+t_{b}^{n}
\]</div>
<p>Above <span class="math notranslate nohighlight">\(R^n_b \in SO(3)\)</span> is the rotation matrix that specifies the orientation
of frame <span class="math notranslate nohighlight">\(B\)</span> w.r.t. frame <span class="math notranslate nohighlight">\(N\)</span>,
and  <span class="math notranslate nohighlight">\(t^n_b \in \mathbb{R}^3\)</span> gives the location of the origin
of frame <span class="math notranslate nohighlight">\(B\)</span> specified in the coordinates of frame <span class="math notranslate nohighlight">\(N\)</span>.</p>
<p>We denote this transform by
<span class="math notranslate nohighlight">\(T_{b}^{n}\doteq\left(R_{b}^{n},\,t_{b}^{n}\right)\)</span>.
These transforms <span class="math notranslate nohighlight">\(T_{b}^{n}\)</span> are elements of
the  <strong>special Euclidean group</strong> of order 3, <span class="math notranslate nohighlight">\(SE(3)\)</span>.
Similarly to the previous chapter we can construct
matrices in <span class="math notranslate nohighlight">\(SE(3)\)</span> by<br />
by embedding the rotation and translation into a <span class="math notranslate nohighlight">\(4\times4\)</span> invertible matrix defined as</p>
<div class="math notranslate nohighlight">
\[\begin{split}
T_{b}^{n}=\begin{bmatrix}
R_{b}^{n} &amp; t_{b}^{n}\\
0 &amp; 1
\end{bmatrix}.
\end{split}\]</div>
<p>Again, as in the previous chapter, we can implement the group operation as simple matrix multiplication.
And, in analogy with the 2D case, if we use the homogeneous coordinates
for a point <span class="math notranslate nohighlight">\(p\)</span>, we define
a 3D homogeneous transformation as</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{bmatrix}
R_{b}^{n} &amp; t_{b}^{n}\\
0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
p^{b}\\
1
\end{bmatrix}
=\begin{bmatrix}
R_{b}^{n}p^{b}+t_{b}^{n}\\
1
\end{bmatrix}
\end{split}\]</div>
<p>Note that both ways of defining and applying 3D rigid transformations are equivalent: sometimes it is more convenient to use one over the other. It should be apparent from the context as to which flavor we use.</p>
</section>
<section id="the-group-se-3">
<h2><span class="section-number">7.1.3. </span>The Group <span class="math notranslate nohighlight">\(SE(3)\)</span><a class="headerlink" href="#the-group-se-3" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(SE(3)\)</span> is a non-commutative group.</p>
</div></blockquote>
<p>Unsurprisingly, <span class="math notranslate nohighlight">\(SE(3)\)</span> is also a group, as the following properties all hold:</p>
<ol class="arabic simple">
<li><p><strong>Closure</strong>: For all transforms <span class="math notranslate nohighlight">\(T, T' \in SE(3)\)</span>, their product is also in <span class="math notranslate nohighlight">\(SE(3)\)</span>, i.e., <span class="math notranslate nohighlight">\(T T' \in SE(3)\)</span>.</p></li>
<li><p><strong>Identity</strong>: The <span class="math notranslate nohighlight">\(4\times 4\)</span> identity matrix <span class="math notranslate nohighlight">\(I\)</span> is included in the group, and for
all <span class="math notranslate nohighlight">\(T \in SE(3)\)</span> we have <span class="math notranslate nohighlight">\(T I = I T = T\)</span>.</p></li>
<li><p><strong>Inverse</strong>: For every <span class="math notranslate nohighlight">\(T \in SE(3)\)</span> there exists <span class="math notranslate nohighlight">\(T^{-1} \in SE(3)\)</span> such that <span class="math notranslate nohighlight">\(T^{-1}T = T T^{-1} = I\)</span>.</p></li>
<li><p><strong>Associativity</strong>: For all <span class="math notranslate nohighlight">\(T_1, T_2, T_3 \in SE(3)\)</span>, <span class="math notranslate nohighlight">\((T_1 T_2) T_3 = T_1 (T_2 T_3)\)</span>.</p></li>
</ol>
<p>The inverse <span class="math notranslate nohighlight">\(T^{-1}\)</span> is given by:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
T^{-1} = \begin{bmatrix}R &amp; d\\0_3 &amp; 1\end{bmatrix}^{-1}
 = \begin{bmatrix}R^T &amp; -R^T d\\0_3 &amp; 1\end{bmatrix}
\end{split}\]</div>
<p>However, 3D rigid transforms do <em>not</em> commute. Hence, <span class="math notranslate nohighlight">\(SE(3)\)</span> is a <strong>noncommutative group</strong>. In fact, so is the group <span class="math notranslate nohighlight">\(SO(3)\)</span>: 3D rotations only commute when they represent rotations along the same axis. A special case is the set of 2D rotations from the last chapter, which are all around the imagined z-axis: this explains why rotations in 2D commute, but rotations in 3D do not, in general.</p>
</section>
<section id="se-3-in-gtsam">
<h2><span class="section-number">7.1.4. </span><span class="math notranslate nohighlight">\(SE(3)\)</span> in GTSAM<a class="headerlink" href="#se-3-in-gtsam" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">Pose3</span></code> is a noncommutative group which acts on <code class="docutils literal notranslate"><span class="pre">Point3</span></code>.</p>
</div></blockquote>
<p>Again, all of this is built into GTSAM, where both 3D poses and 3D rigid transforms are represented by the type <code class="docutils literal notranslate"><span class="pre">Pose3</span></code>, with rotation matrices represented by <code class="docutils literal notranslate"><span class="pre">Rot3</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">R</span> <span class="o">=</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Rot3</span><span class="o">.</span><span class="n">Yaw</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span> <span class="c1"># rotation around Z-axis by 20 degrees</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Pose3</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3D Pose </span><span class="si">{</span><span class="n">T</span><span class="si">}</span><span class="se">\n</span><span class="s2">corresponding to the transformation matrix:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">T</span><span class="o">.</span><span class="n">matrix</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3D Pose R: [
	-0.720878, -0.693062, 0;
	0.693062, -0.720878, 0;
	0, 0, 1
]
t: 10 20 30

corresponding to the transformation matrix:

[[-0.72087779 -0.6930622   0.         10.        ]
 [ 0.6930622  -0.72087779  0.         20.        ]
 [ 0.          0.          1.         30.        ]
 [ 0.          0.          0.          1.        ]]
</pre></div>
</div>
</div>
</div>
<p>We can verify the group properties for 3D transforms in code, as we do below, noting that the last assertion for commutativity yields <code class="docutils literal notranslate"><span class="pre">False</span></code>, as <span class="math notranslate nohighlight">\(SE(3)\)</span> is a <em>noncommutative</em> group:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Closure:&quot;</span><span class="p">,</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span> <span class="n">T</span><span class="p">,</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Pose3</span><span class="p">))</span> <span class="c1"># closure</span>
<span class="n">I</span> <span class="o">=</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Pose3</span><span class="o">.</span><span class="n">Identity</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Identity:&quot;</span><span class="p">,</span> <span class="n">T</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span> <span class="n">I</span><span class="p">,</span> <span class="mf">1e-9</span><span class="p">))</span> <span class="c1"># identity</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inverse:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">T</span> <span class="o">*</span> <span class="n">T</span><span class="o">.</span><span class="n">inverse</span><span class="p">())</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="mf">1e-9</span><span class="p">))</span> <span class="c1"># inverse</span>
<span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span> <span class="o">=</span> <span class="n">T</span><span class="p">,</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Pose3</span><span class="p">(</span><span class="n">gtsam</span><span class="o">.</span><span class="n">Rot3</span><span class="o">.</span><span class="n">Roll</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Pose3</span><span class="p">(</span><span class="n">gtsam</span><span class="o">.</span><span class="n">Rot3</span><span class="o">.</span><span class="n">Roll</span><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Associativity:&quot;</span><span class="p">,</span> <span class="p">((</span><span class="n">T1</span> <span class="o">*</span> <span class="n">T2</span><span class="p">)</span><span class="o">*</span> <span class="n">T3</span><span class="p">)</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">T1</span> <span class="o">*</span> <span class="p">(</span><span class="n">T2</span> <span class="o">*</span> <span class="n">T3</span><span class="p">),</span> <span class="mf">1e-9</span><span class="p">))</span> <span class="c1"># associative</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Commutativity:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">T1</span> <span class="o">*</span> <span class="n">T2</span><span class="p">)</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">T2</span> <span class="o">*</span> <span class="n">T1</span><span class="p">,</span> <span class="mf">1e-9</span><span class="p">))</span> <span class="c1"># NOT commutative</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Closure: True
Identity: True
Inverse: True
Associativity: True
Commutativity: False
</pre></div>
</div>
</div>
</div>
<p>Finally, 3D transforms can <em>act</em> on 3D points, which we can do using matrix multiplication, or using the <code class="docutils literal notranslate"><span class="pre">Pose3.transformFrom</span></code> method:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">P1</span> <span class="o">=</span> <span class="n">gtsam</span><span class="o">.</span><span class="n">Point3</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;P0 = </span><span class="si">{</span><span class="n">T</span><span class="o">.</span><span class="n">matrix</span><span class="p">()</span><span class="w"> </span><span class="o">@</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># need to make P0 homogeneous</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;P0 = </span><span class="si">{</span><span class="n">T</span><span class="o">.</span><span class="n">transformFrom</span><span class="p">(</span><span class="n">P1</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>P0 = [ 5.78599563 18.50261322 33.          1.        ]
P0 = [ 5.78599563 18.50261322 33.        ]
</pre></div>
</div>
</div>
</div>
<p>You can see from the code snippet above that both approaches yield the same numerical values for the first three coordinates.</p>
</section>
<section id="velocity">
<h2><span class="section-number">7.1.5. </span>Velocity<a class="headerlink" href="#velocity" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>Velocity comes in two flavors: linear and angular.</p>
</div></blockquote>
<p>The <strong>linear velocity</strong> <span class="math notranslate nohighlight">\(v\)</span> of the origin of a moving frame is easy to understand.
This velocity is obtained merely by computing the derivative of the translation <span class="math notranslate nohighlight">\(t\)</span> of the frame’s origin:</p>
<div class="math notranslate nohighlight">
\[
v \doteq \frac{d}{dt}t
\]</div>
<p>We omit coordinate frame indices here to not clutter the notation.</p>
<p>The derivative <span class="math notranslate nohighlight">\(\dot{R}\)</span> of orientation is more interesting.
We begin by introducing the family of <span class="math notranslate nohighlight">\(3 \times 3\)</span> skew symmetric matrices, denoted by <span class="math notranslate nohighlight">\(\mathfrak{so}(3)\)</span>.
The relationship between <span class="math notranslate nohighlight">\(\mathfrak{so}(3)\)</span> and <span class="math notranslate nohighlight">\(SO(3)\)</span> will become apparent shortly.
A matrix <span class="math notranslate nohighlight">\(S\)</span> is said to be a <strong>skew symmetric matrix</strong> if</p>
<div class="math notranslate nohighlight">
\[
S = - S^T
\]</div>
<p>If we examine this equation for each element of <span class="math notranslate nohighlight">\(S\)</span>, we obtain nine equations,</p>
<div class="math notranslate nohighlight">
\[ s_{i,j} = - s_{j,i}, ~~~~ i,j = 1,2,3 \]</div>
<p>When <span class="math notranslate nohighlight">\(i=j\)</span>, we have <span class="math notranslate nohighlight">\(s_{ii} = -s_{ii}\)</span>, which is satisfied only if <span class="math notranslate nohighlight">\(s_{ii} = 0\)</span>.
Thus, the diagonal elements of a skew symmetric matrix are all zeros.
The remaining equations constrain the off-diagonal entries, such that
every <span class="math notranslate nohighlight">\(S \in so(3)\)</span> can be written as</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\hat{s} = S =
\begin{bmatrix}
0 &amp; -s_z &amp;s_y \\
s_z &amp; 0 &amp; -s_x \\
-s_y &amp; s_x &amp; 0
\end{bmatrix}
\end{split}\]</div>
<p>in which the <strong>hat operator</strong> <span class="math notranslate nohighlight">\(\hat{\cdot}\)</span>, maps a vector <span class="math notranslate nohighlight">\(s = (s_x, s_y, s_z)\)</span> to
a skew symmetric matrix as above.</p>
<p>Skew symmetric matrices play a key role in representing the angular rate of change of coordinate frames.
Let <span class="math notranslate nohighlight">\(R(t)\)</span> be a time-varying rotation matrix.
Because <span class="math notranslate nohighlight">\(R(t) \in SO(3)\)</span>, at each time <span class="math notranslate nohighlight">\(t\)</span> we have <span class="math notranslate nohighlight">\(R^T(t) R(t) = I\)</span>.
If we differentiate both sides of this equation, we obtain</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
\frac{d}{dt} \left[ R^T(t) R(t) \right] &amp;= \frac{d}{dt} I  \\
     \dot{R}^T R + R^T \dot{R} &amp;= 0
\end{aligned}
\end{split}\]</div>
<p>In other words, <span class="math notranslate nohighlight">\(\dot{R}^T R = -R^T \dot{R}\)</span> and hence the matrix <span class="math notranslate nohighlight">\(\dot{R}^T R\)</span> <em>is a skew symmetric matrix</em></p>
<div class="math notranslate nohighlight">
\[\hat{\omega} = \dot{R}^T R\]</div>
<p>with <span class="math notranslate nohighlight">\(\omega\)</span> some three-vector. Recalling that <span class="math notranslate nohighlight">\(R^{-1} = R^T\)</span>,
we can solve this equation for <span class="math notranslate nohighlight">\(\dot{R}\)</span> to obtain:</p>
<div class="math notranslate nohighlight">
\[\dot{R} = \hat{\omega} R .\]</div>
<p>The above gives an expression for the derivative of a rotation matrix <span class="math notranslate nohighlight">\(\dot{R}\)</span> that
will be used below in our formulation of drone dynamics.
The vector <span class="math notranslate nohighlight">\(\omega\)</span> is called the <strong>angular velocity</strong>,
and is the same angular velocity that you may have
learned in an introductory physics course.</p>
<p>Note that the angular velocity vector <span class="math notranslate nohighlight">\(\omega\)</span> is a free vector, and therefore,
we can define its coordinates with respect to the coordinate frame of our choice.
To understand this, it is worth reconsidering the above in the context of
a specific rotation matrix, say <span class="math notranslate nohighlight">\(R^n_b\)</span> that specifies the orientation of
body frame with respect to the navigation frame.
In this case, making explicit the relevant coordinate frames, we would write</p>
<div class="math notranslate nohighlight">
\[\dot{R}^n_b = \hat{\omega}^n_{n,b} R^n_b .\]</div>
<p>Here, the notation <span class="math notranslate nohighlight">\(\hat{\omega}^n_{n,b}\)</span> can be understood to mean that
the angular velocity <span class="math notranslate nohighlight">\(\omega\)</span> determines the relative rate of angular rotation
of the body frame with respect to the navigation frame (the “<span class="math notranslate nohighlight">\(n,b\)</span>” in the subscript), and that
the coordinates of the angular velocity vector are given with respect to the navigation
frame (the “<span class="math notranslate nohighlight">\(n\)</span>” in superscript).
Most often, the subscript can be inferred from context, and will be omitted.
If, for example, we are concerned with the rotation of the quadrotor with respect
to the navigation frame, the two coordinate frames will be clear from the context,
and we can reduce clutter by omitting the subscript.
In contrast, we will typically keep the superscript to make clear the reference
frame in which the angular velocity is defined.
This will be particularly important, for example, when we express control inputs relative to the
quadrotor’s body frame, with a control goal of stabilizing its orientation
relative to the fixed navigation coordinate frame.</p>
<p>Equipped with this notation, it is easy to understand how to transform angular velocity vectors from one frame to another.
If we are given <span class="math notranslate nohighlight">\(\omega^n_{n,b}\)</span> (i.e., the angular velocity is expressed with respect to the navigation frame),
and we instead wish to specify the angular velocity with respect to the body frame, we merely perform the coordinate
transformation</p>
<div class="math notranslate nohighlight">
\[
\omega^b_{n,b} = R^b_n \omega^n_{n,b}
\]</div>
<p>or, when the context is understood, more compactly, as</p>
<div class="math notranslate nohighlight">
\[
\omega^b = R^b_n \omega^n
\]</div>
<p>This transformation will be useful when expressing a desired angular velocity
with respect to the body frame of a quadrotor.</p>
</section>
<section id="summary">
<h2><span class="section-number">7.1.6. </span>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>Now that we know how to talk about 3D rotations, 3D rigid transformations, <em>and</em> their rate of change, we are ready to use all that machinery to describe how drones move in 3D. The next section tackles this.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="S70_drone_intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">7. </span>Autonomous Drones in 3D</p>
      </div>
    </a>
    <a class="right-next"
       href="S72_drone_actions.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">7.2. </span>Multi-rotor Aircraft</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rotations-in-3d-aka-so-3">7.1.1. Rotations in 3D aka SO(3)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#d-rigid-transforms-aka-se-3">7.1.2. 3D Rigid transforms aka SE(3)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-group-se-3">7.1.3. The Group <span class="math notranslate nohighlight">\(SE(3)\)</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#se-3-in-gtsam">7.1.4. <span class="math notranslate nohighlight">\(SE(3)\)</span> in GTSAM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity">7.1.5. Velocity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">7.1.6. Summary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Frank Dellaert and Seth Hutchinson
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>